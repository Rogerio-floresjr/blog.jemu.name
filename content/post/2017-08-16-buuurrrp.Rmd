---
title: Buuurrrp
author: Jemus42
date: '2017-08-20'
slug: buuurrrp
categories:
  - tvshows
  - rstats
tags:
  - Rmd
  - trakt.tv
shows: 
  - Rick and Morty
packages: 
  - tRakt
  - ggplot2
  - hrbrthemes
  - kableExtra
  - dplyr
editor_options: 
  chunk_output_type: console
---

```{r init, include = FALSE}
source(here::here("global.R"))

cache_path <- make_cache_path("buuurrrp")
```

Everybody lo*burp*es [Rick and Morty](https://trakt.tv/shows/rick-and-morty), and rightly so.  
It ticks all the cynical boxes full of nihilistic meta-humor and what not, while satirizing pretty much everything.

So, yeah, I'll plot the [trakt.tv](https://trakt.tv) ratings and pretend someone cares.

## Getting the Data

```{r dataprep}
library(tRakt)
library(dplyr)
library(ggplot2)
library(hrbrthemes)
library(kableExtra)

if (file_not_cached(cache_path, ricknmorty)) {
  ricknmorty <- trakt.seasons.summary(
    "rick-and-morty", extended = "full", episodes = TRUE
    ) %>%
    pull(episodes) %>%
    bind_rows() %>%
    mutate(season = as.character(season))
  
  cache_file(cache_path, ricknmorty)
}

ricknmorty <- read_cache_file(cache_path, ricknmorty)

# Top 10 episodes
ricknmorty %>%
  transmute(
    epid = paste0("s", season, "e", episode),
    first_aired = format(first_aired, "%F"), 
    title, rating
  ) %>%
  arrange(desc(rating)) %>%
  head(10) %>%
  kable(
    col.names = c("Episode", "First Aired", "Title", "Rating"),
    caption = "Episode data",
    digits = 2
  ) %>%
  kable_styling()
```

Well those sure are some episodes!

## Plo*burp*oots

```{r ep_abs, fig.cap="Absolute Episode Numbers with Ratings"}
ggplot(data = ricknmorty, 
       aes(x = episode_abs, y = rating, fill = season)) +
  geom_point(shape = 21, size = 3, color = "black") +
  scale_x_continuous(
    breaks = seq(0, 100, 5), minor_breaks = seq(0, 100, 1)) +
  scale_y_continuous(
    breaks = seq(0, 10, .25), 
    minor_breaks = seq(0, 10, .05),
    limits = range(ricknmorty$rating) + c(-.2, .2)
    ) +
  scale_fill_ipsum() +
  labs(
    title = "Rick & Morty",
    subtitle = "User Ratings on trakt.tv",
    x = "Absolute Episode #",
    y = "User Rating (1-10)",
    fill = "Season",
    caption = paste("Data as of", cache_date(ricknmorty, cache_path))
  )
```

```{r ep_date, fig.cap="Episodes per Air Date with Ratings"}
ggplot(data = ricknmorty, 
       aes(x = first_aired, y = rating, fill = season)) +
  geom_point(shape = 21, size = 3, color = "black") +
  scale_x_datetime(
    date_breaks = "6 months", date_labels = "%b '%y"
  ) +
  scale_y_continuous(
    breaks = seq(0, 10, .25), 
    minor_breaks = seq(0, 10, .05),
    limits = range(ricknmorty$rating) + c(-.2, .2)
  ) +
  scale_fill_ipsum() +
  labs(
    title = "Rick & Morty",
    subtitle = "User Ratings on trakt.tv",
    x = "Original Air Date",
    y = "User Rating (1-10)",
    fill = "Season",
    caption = paste("Data as of", cache_date(ricknmorty, cache_path))
  )
```

## Seas*brrp*ns

```{r seasons, fig.cap="Aggregate Season Ratings"}
ggplot(data = ricknmorty, 
       aes(x = season, y = rating, fill = season)) +
  geom_boxplot(color = "black", alpha = .6) +
  geom_jitter(shape = 21, size = 3, alpha = .5, height = .01) +
  scale_y_continuous(
    breaks = seq(0, 10, .25), 
    minor_breaks = seq(0, 10, .05),
    limits = range(ricknmorty$rating) + c(-.2, .2)) +
  scale_fill_ipsum(guide = FALSE) +
  labs(
    title = "Rick & Morty",
    subtitle = "User Ratings on trakt.tv",
    x = "Season",
    y = "User Rating (1-10)",
    caption = paste("Data as of", cache_date(ricknmorty, cache_path))
  )
```

There might be something to learn from this, but I have to go lie down now.
