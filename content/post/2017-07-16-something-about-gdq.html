---
title: Something About GDQ
author: jemus42
date: '2017-07-16'
slug: something-about-gdq
categories:
  - rstats
tags: 
  - rstats
  - Rmd
  - GDQ
packages:
  - dplyr
  - ggplot2
  - rvest
editor_options: 
  chunk_output_type: console
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<p>Everybody likes Games Done Quick, and the events have contributed significant amounts to charity.<br />
I just wanted to look at how much exactly.</p>
<!--more-->
<pre class="r language-r"><code>gdq_raw &lt;- read_html(&quot;https://en.wikipedia.org/wiki/Games_Done_Quick&quot;) %&gt;%
        html_table(fill = TRUE)

gdq &lt;- bind_rows(
  gdq_raw[[2]] %&gt;%
  mutate(event = &quot;AGDQ&quot;),
  gdq_raw[[3]] %&gt;% 
  mutate(event = &quot;SGDQ&quot;)
) %&gt;%
  transmute(amount  = parse_number(`Amount raised`),
            charity = str_replace_all(Charity, &quot;\\[\\d+\\]&quot;, &quot;&quot;),
            year    = str_extract(Dates, &quot;\\d{4}&quot;),
            event   = event) %&gt;%
  filter(!is.na(amount))</code></pre>
<p>Well, now we got the data from Wikipedia. Let’s take a look.</p>
<pre class="r language-r"><code>ggplot(data = gdq, aes(x = year, y = amount, fill = event)) +
  geom_col(position = &quot;dodge&quot;) +
  scale_y_continuous(labels = scales::dollar_format()) +
  scale_fill_brewer(palette = &quot;Set1&quot;) +
  labs(title = &quot;Games Done Quick Donation Totals&quot;,
       subtitle = &quot;Amounts Raised at Each Event&quot;,
       x = &quot;Year of Event&quot;, y = &quot;Amount Raised&quot;, fill = &quot;Event&quot;,
       caption = &quot;Data from\nhttps://en.wikipedia.org/wiki/Games_Done_Quick&quot;)</code></pre>
<figure>
<picture>
<source type='image/webp' srcset='../../../post/2017-07-16-something-about-gdq_files/figure-html/looking_at_data-1.webp'>
<a href='../../../post/2017-07-16-something-about-gdq_files/figure-html/looking_at_data-1.png' data-title='looking_at_data'>
<img src='../../../post/2017-07-16-something-about-gdq_files/figure-html/looking_at_data-1.png'  width = "90%"   alt='looking_at_data' />
</a></picture>
<figcaption>
looking_at_data
</figcaption>
</figure>
<p>Boy that sure are some numbers. Let’s look at the cumulative donations per charity.</p>
<p>Since most events benefit <em>Doctors Without Borders</em> and <em>Prevent Cancer Foundation</em> respectively, I’ll exclude the other charities (<em>CARE</em> and <em>Organisation for Autism Research</em>) from this graph, they’ll come up later.</p>
<pre class="r language-r"><code>gdq %&gt;% 
  filter(charity %in% c(&quot;Doctors Without Borders&quot;, &quot;Prevent Cancer Foundation&quot;)) %&gt;%
  mutate(charity = factor(charity, 
                          levels = c(&quot;Prevent Cancer Foundation&quot;, 
                                     &quot;Doctors Without Borders&quot;), ordered = TRUE)) %&gt;%
  group_by(charity) %&gt;%
  mutate(cum_amount = cumsum(amount)) %&gt;%
  {
    ggplot(data = ., aes(x = year, y = cum_amount, fill = charity)) +
      geom_col(position = &quot;dodge&quot;) +
      scale_y_continuous(labels = scales::dollar_format()) +
      scale_fill_brewer(palette = &quot;Set1&quot;) +
      labs(title = &quot;Games Done Quick Donation Totals&quot;,
           subtitle = &quot;Cumulative Amount Raised for Each Charity&quot;,
           x = &quot;Year of Event&quot;, y = &quot;Amount Raised&quot;, fill = &quot;Charity&quot;,
           caption = &quot;Data from\nhttps://en.wikipedia.org/wiki/Games_Done_Quick&quot;)
  }</code></pre>
<figure>
<picture>
<source type='image/webp' srcset='../../../post/2017-07-16-something-about-gdq_files/figure-html/per_charity-1.webp'>
<a href='../../../post/2017-07-16-something-about-gdq_files/figure-html/per_charity-1.png' data-title='per_charity'>
<img src='../../../post/2017-07-16-something-about-gdq_files/figure-html/per_charity-1.png'  width = "90%"   alt='per_charity' />
</a></picture>
<figcaption>
per_charity
</figcaption>
</figure>
<p>Okay, now cumulative totals:</p>
<pre class="r language-r"><code>gdq %&gt;% 
  group_by(charity) %&gt;%
  mutate(cum_amount = sum(amount)) %&gt;%
  {
    ggplot(data = ., aes(x = reorder(charity, cum_amount), y = cum_amount)) +
      geom_col(position = &quot;dodge&quot;, alpha = .7) +
      geom_label(aes(label = scales::dollar(cum_amount), y = 2e6)) +
      coord_flip() +
      scale_y_continuous(labels = scales::dollar_format()) +
      scale_fill_brewer(palette = &quot;Set2&quot;) +
      labs(title = &quot;Games Done Quick Donation Totals&quot;,
           subtitle = &quot;Cumulative Amount Raised for Each Charity&quot;,
           x = &quot;Charity&quot;, y = &quot;Amount Raised&quot;,
           caption = &quot;Data from\nhttps://en.wikipedia.org/wiki/Games_Done_Quick&quot;)
  }</code></pre>
<figure>
<picture>
<source type='image/webp' srcset='../../../post/2017-07-16-something-about-gdq_files/figure-html/cum_total-1.webp'>
<a href='../../../post/2017-07-16-something-about-gdq_files/figure-html/cum_total-1.png' data-title='cum_total'>
<img src='../../../post/2017-07-16-something-about-gdq_files/figure-html/cum_total-1.png'  width = "90%"   alt='cum_total' />
</a></picture>
<figcaption>
cum_total
</figcaption>
</figure>
<p>And as a grand total, <em>Games Done Quick</em> has raised <strong>$21,982,013</strong> for charity.<br />
Neat.</p>
